<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Registration Form</title>
  <style>
    body{font-family:Arial,sans-serif;background:linear-gradient(to right,#ABB1E3 10%,#ADB3E7 20%,#ABB1E5,#A5ACE2 60%,#9FA5DF 70%,#979DD9 90%,#979DDB 30%,#9197D8);margin:0;display:flex;align-items:center;justify-content:center;height:100vh}#stop{width:160px; position: relative; left: 360px; bottom:150px;}#main-container{width:800px;height:600px;border-radius:25px;background:linear-gradient(to right,#ADB3E7 20%,#ABB1E5,#A5ACE2 60%,#979DD9 90);box-shadow:7px 7px 10px #6F74B8,7px 7px 10px #6F74B8;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#registration-container{background-color:transparent;padding:20px;width:400px;height:300px;display:flex;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);flex-direction:column;justify-content:space-between}.registration-step{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}.registration-step.active{display:block}label{display:block;margin-top:10px;position:relative;bottom:55px;color:white}input{width:100%;padding:10px;margin-top:5px;margin:0 auto;position:relative;bottom:50px;border:transparent;border-radius:10px;box-shadow:inset 3px 3px 4px #6F74B8,inset 3px 3px 4px #b7bbe8;box-sizing:border-box}h2{position:relative;color:white;bottom:90px}button{background-color:#5c62b8;box-shadow:3px 3px 4px #6F74B8,3px 3px 4px #b7bbe8;color:white;padding:10px 15px;width:100px;height:40px;border:none;border-radius:5px;cursor:pointer;position:relative}#prev-btn{left:60px;top:340px}#next-btn{left:240px;top:80px}#selfie-video{display:none}#voice-recording-container{display:none ; position: relative; bottom: 60px;}.file-input-container{position:relative;overflow:hidden;display:inline-block;border:2px solid #5c62b8;color:#5c62b8;background-color:#ffffff;border-radius:5px;padding:8px 12px;cursor:pointer}.file-input-button{background-color:white;color:white;padding:10px 15px;border:none;border-radius:5px;cursor:pointer}input[type="file"]::-webkit-file-upload-button{border-radius:20px;border:transparent;background-color:#5c62b8;box-shadow:3px 3px 4px #6F74B8,3px 3px 4px #b7bbe8;color:white;padding:10px 15px}input[type="file"]{background-color:white}input[type="file"]::-webkit-{color:#5c62b8;position:relative;left:30px}p{color:white}#selfie{position:relative;left:150px;bottom:85px;width:130px}#steps{position:relative}#start-recording{position:relative;left:230px;bottom:85px;width:120px}#for-cam{width:800px;height:600px;border-radius:25px;background:linear-gradient(to right,#ADB3E7 20%,#ABB1E5,#A5ACE2 60%,#979DD9 90);box-shadow:7px 7px 10px #6F74B8,7px 7px 10px #6F74B8;position:absolute;display:none;top:50%;left:50%;transform:translate(-50%,-50%)}#for-voice{width:800px;height:600px;border-radius:25px;background:linear-gradient(to right,#ADB3E7 20%,#ABB1E5,#A5ACE2 60%,#979DD9 90);box-shadow:7px 7px 10px #6F74B8,7px 7px 10px #6F74B8;position:absolute;display:none;top:50%;left:50%;transform:translate(-50%,-50%)}

  </style>
</head>
<body>
  <div id="main-container">
    <div id="registration-container">
      <div class="registration-step active" id="step1">
        <h2>Step 1: Personal Information</h2>
        <form>
          <label for="first-name">First Name:</label>
          <input type="text" id="first-name" name="first-name" placeholder="Enter your First Name" required>

          <label for="middle-name">Middle Name:</label>
          <input type="text" id="middle-name" name="middle-name" placeholder="Enter your Middle Name">

          <label for="last-name">Last Name:</label>
          <input type="text" id="last-name" name="last-name" required placeholder="Enter your Last Name">
        </form>
      </div>

      <div class="registration-step" id="step2">
        <h2>Step 2: Document Verification</h2>
        <form>
          <label for="aadhar-no">Aadhar Number:</label>
          <input type="text" id="aadhar-no" name="aadhar-no" required placeholder="Enter your Aadhar number">

          <label for="pan-no">PAN Card Number:</label>
          <input type="text" id="pan-no" name="pan-no" required placeholder="Enter your PanCard Number">

          <label for="photo">Upload Photo:</label>
          <input type="file" id="photo" name="photo" accept="image/*" required>

          <label for="pan-photo">Upload PAN Card Photo:</label>
          <input type="file" id="pan-photo" name="pan-photo" accept="image/*" required>
        </form>
      </div>

      <div class="registration-step" id="step3">
        <h2 id="steps">Step 3: Security and Bio Verification</h2>
        <form>
          <label for="live-selfie">Take Live Selfie:</label>
          <button type="button" onclick="captureSelfie()" id="selfie">Capture Selfie</button>
          <video id="selfie-video" width="300" height="200" autoplay></video>

          <label for="voice-recording">Record Voice (15 seconds):</label>
          <button type="button" onclick="startVoiceRecording()" id="start-recording">Voice Record</button>
          <div id="voice-recording-container">
            <p>Read the following words while recording:</p>
            <p>"Hello, I am verifying my voice."</p>
            <button type="button" onclick="stopVoiceRecording()" id="stop">Stop Recording</button>
          </div>

          <label for="signature">Upload Signature:</label>
          <input type="file" id="signature" name="signature" accept="image/*" required>
        </form>
      </div>

      <button type="button" onclick="prevStep()" id="prev-btn">Previous</button>
      <button type="button" onclick="nextStep()" id="next-btn">Next</button>
    </div>
  </div>

  <div id="for-cam"></div>
  <div id="for-voice"></div>

  <script>
    let currentStep = 1;
    let mediaRecorder;
    let recordedChunks = [];

    function nextStep() {
      const currentStepElement = document.getElementById(`step${currentStep}`);
      const nextStepElement = document.getElementById(`step${currentStep + 1}`);

      if (nextStepElement) {
        currentStepElement.classList.remove('active');
        nextStepElement.classList.add('active');
        currentStep += 1;
      }
    }

    function prevStep() {
      const currentStepElement = document.getElementById(`step${currentStep}`);
      const prevStepElement = document.getElementById(`step${currentStep - 1}`);

      if (prevStepElement) {
        currentStepElement.classList.remove('active');
        prevStepElement.classList.add('active');
        currentStep -= 1;
      }
    }

    function captureSelfie() {
      navigator.mediaDevices.getUserMedia({ video: true })
          .then((stream) => {
              const video = document.getElementById('selfie-video');
              video.srcObject = stream;
              video.style.display = 'block';
              setTimeout(() => {
                video.style.display = 'none';
                stream.getTracks().forEach(track => track.stop());
              }, 3000);
          })
          .catch((error) => {
              console.error('Error accessing camera:', error);
              alert('Camera permission is denied. Please allow camera access in your browser settings.');
          });
    }

    function startVoiceRecording() {
      const voiceRecordingContainer = document.getElementById('voice-recording-container');
      voiceRecordingContainer.style.display = 'block';

      navigator.mediaDevices.getUserMedia({ audio: true })
          .then((stream) => {
              mediaRecorder = new MediaRecorder(stream);

              mediaRecorder.ondataavailable = (event) => {
                  if (event.data.size > 0) {
                      recordedChunks.push(event.data);
                  }
              };

              mediaRecorder.onstop = () => {
                  const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                  recordedChunks = [];
              };

              mediaRecorder.start();
          })
          .catch((error) => {
              console.error('Error accessing microphone:', error);
              alert('Microphone permission is denied. Please allow microphone access in your browser settings.');
          });
    }

    function stopVoiceRecording() {
      if (mediaRecorder && mediaRecorder.state === 'recording') {
          mediaRecorder.stop();
          const voiceRecordingContainer = document.getElementById('voice-recording-container');
          voiceRecordingContainer.style.display = 'none';
      }
    }
  </script>
</body>
</html>
